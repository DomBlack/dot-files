---

- name: ensure ~/local/bin exists
  file:
    path: "{{ ansible_env.HOME }}/local/bin"
    state: directory
    mode: 0755
  tags:
    - tmux
    - prezto

- name: ensure ~/local/tmp exists
  file:
    path: "{{ ansible_env.HOME }}/local/tmp"
    state: directory
    mode: 0755
  tags:
    - tmux
    - prezto


- name: ensure prezto is installed if ZSH is present
  include: prezto.yml
  tags: prezto

- name: ensure shell facts are set
  include: shell.yml
  tags: powerline

- name: ensure powerline tasks are run
  include: powerline.yml
  tags: powerline

- name: ensure vim tasks are run
  include: vim.yml
  tags: vim

- name: ensure tmux.conf is present
  tags: tmux
  copy:
    src: tmux.conf
    dest: ~/.tmux.conf
    mode: 0644

- name: ensure global .gitignore is copied
  copy:
    src: gitignore
    dest: ~/.gitignore
    mode: 0644

- name: ensure global .gitconfig is copied
  copy:
    src: gitconfig
    dest: ~/.gitconfig
    mode: 0644

- name: ensure MacOS specific tasks are run
  include: macos.yml
  tags: macos
  when: ansible_distribution == 'MacOSX'

- name: ensure tmux is installed on linux boxes
  include: tmux-linux.yml
  tags: tmux
  when: ansible_distribution == 'CentOS' or ansible_distribution == 'Red Hat Enterprise Linux' or ansible_distribution == 'Debian' or ansible_distribution == 'Ubuntu'